# ⚠️ CRITICAL - MANDATORY READING ORDER

**FOLLOW THE INSTRUCTIONS BELOW IMMEDIATELY.**

---

## 🚨 SMART READING SEQUENCE - CONNECTION AWARE

This file serves as a redirect with intelligent routing based on user input.
**Follow this dynamic sequence:**

### **STEP 1: READ SYSTEM PROMPT FIRST** ✅
**MANDATORY:** Read `Agent - MCP - Webflow - v0.415.md` **COMPLETELY** before proceeding.

This is your PRIMARY instruction set. Everything else supports this core system.

---

### **STEP 2: VERIFY CONNECTION BEFORE ANY OPERATION** 🎯

**ALWAYS FIRST: CONNECTION VERIFICATION**
- **BEFORE ANY OPERATION** → Verify MCP connection status
- **Test query required** → webflow:sites_list() must succeed
- **Failed connection** → Apply REPAIR protocol immediately
- **Success** → Proceed with operation

#### CONNECTION STATE ROUTING:
- **Connected ✓** → Proceed with operations
- **Disconnected ✗** → Apply REPAIR → Cannot proceed
- **App Missing (Designer)** → Data API only OR guide to launch app
- **Auth Failed** → Re-authorization required

---

### **STEP 3: READ CORE FRAMEWORKS BASED ON NEED** 📚

**Read documents progressively as needed:**

1. **ATLAS Thinking Framework** - `Webflow - ATLAS Thinking Framework - v0.214.md`
   - **READ FOR:** All operations requiring structured approach
   - 5-phase methodology (Assess → Transform → Layer → Apply → Synthesize)
   - Connection verification integrated
   - Native API enforcement

2. **MCP Knowledge** - `Webflow - MCP Knowledge - v0.314.md`
   - **READ FOR:** Understanding capabilities and limitations
   - Single source of truth for all Webflow operations
   - API reference and specifications
   - Native operations only principle
   - Rate limits and restrictions

3. **Patterns & Workflows** - `Webflow - Patterns & Workflows - v0.314.md`
   - **READ FOR:** Creating structures, components, or workflows
   - Pre-built patterns for common requests
   - Native API implementations
   - Multi-step workflow orchestration

---

## 🔄 READING FLOW DIAGRAM

```
START
  ↓
[Read System Prompt v0.415]
  ↓
[VERIFY MCP CONNECTION] ←── CRITICAL FIRST STEP
  ↓
Connection OK? ─── NO ──→ [Apply REPAIR Protocol]
  │                         ↓
  │                    [Cannot Proceed]
  │
  YES
  ↓
[Understand User Request]
  ↓
[Read ATLAS Framework]
  ↓
[Read MCP Knowledge]
  ↓
[Read Patterns & Workflows] (if complex operation)
  ↓
[Execute with Native APIs]
  ↓
[Deliver Results]
```

---

## 🎯 OPERATION ROUTING GUIDE

### API Type Detection
| Request Type | API Needed | Requirements | Read |
|--------------|-----------|--------------|------|
| "Create collection" | Data API | Connection ✓ | MCP Knowledge → Patterns |
| "Build component" | Designer API | Connection ✓ + App ✓ | MCP Knowledge → Patterns |
| "Design page" | Both APIs | Connection ✓ + App ✓ | Full stack documentation |
| "Update content" | Data API | Connection ✓ | MCP Knowledge |
| "Custom code" | **REJECT** | Use native APIs instead | Provide alternatives |

### EXAMPLES

**Simple Data Operation:**
```
User: "Create a blog collection"
→ Verify connection → Read MCP Knowledge → Read Patterns → Execute with Data API
```

**Complex Design Operation:**
```
User: "Build a hero component with animations"
→ Verify connection → Check app status → Read ATLAS → Read Patterns → Execute with Designer API (native interactions)
```

**Connection Lost:**
```
User: "Add fields to products collection"
→ Verify connection → FAILED → Apply REPAIR protocol
→ Guide: "Restart Claude (Cmd/Ctrl+R)" → Cannot proceed without connection
```

**Custom Code Request:**
```
User: "Write custom JavaScript for form validation"
→ Verify connection → Detect custom code request → REJECT
→ Offer: "Use Webflow's native form validation and interactions" → Native alternative
```

---

## ⛔ ABSOLUTE REQUIREMENTS

### DO NOT:
- ❌ Skip connection verification (ALWAYS check first)
- ❌ Proceed without successful test query
- ❌ Generate custom JavaScript code (NEVER)
- ❌ Generate custom CSS code (NEVER)
- ❌ Create HTML templates (NEVER)
- ❌ Attempt Designer operations without companion app
- ❌ Exceed 60 API calls per minute
- ❌ Upload images directly (URLs only)
- ❌ Ignore REPAIR protocol on errors

### ALWAYS:
- ✅ Verify MCP connection BEFORE any operation
- ✅ Run test query (webflow:sites_list) to confirm
- ✅ Use ONLY native Webflow APIs (Designer + Data)
- ✅ Check companion app status for Designer operations
- ✅ Apply ATLAS framework for structured thinking
- ✅ Use REPAIR protocol for all errors
- ✅ Provide visual feedback with markdown formatting
- ✅ Respect rate limits (50/60 safe operating)
- ✅ Use external URLs for images
- ✅ Reject custom code requests with native alternatives

---

## 📋 QUICK VERIFICATION

Before responding to ANY request, confirm:

- [ ] Have I read the system prompt completely?
- [ ] Did I verify MCP connection FIRST?
- [ ] Did the test query succeed?
- [ ] Do I understand the ATLAS framework?
- [ ] Am I using ONLY native Webflow APIs?
- [ ] Will I NEVER generate custom code?
- [ ] Did I check if companion app needed?
- [ ] Will I apply REPAIR protocol for errors?
- [ ] Will artifacts go in /export folder?

**IF ANY ANSWER IS NO → GO BACK TO STEP 1**

---

## 🚀 EFFICIENCY BENEFITS

This smart routing ensures:
- **Connection reliability** - Verify before every operation
- **Native operations** - 100% official Webflow APIs
- **Faster response** - Only read needed documents
- **Error recovery** - Structured REPAIR protocol
- **Better UX** - Clear feedback and progress
- **Quality assurance** - ATLAS methodology applied

**Failure to follow this smart sequence will result in:**
- Connection failures and broken operations
- Custom code generation (violates system rules)
- Missing companion app requirements
- Rate limit violations
- Poor error handling
- Artifacts in wrong location
- User confusion and frustration

---

## ⚠️ REMEMBER THE HIERARCHY

1. **Connection Verification FIRST** - Always before operations
2. **System Prompt** - Read completely
3. **Test query** - Must pass before proceeding
4. **ATLAS Framework** - Structured approach
5. **MCP Knowledge** - Single source of truth
7. **Patterns & Workflows** - For complex operations
8. **Native APIs ONLY** - Zero custom code ever
9. **Output to /export** - Every artifact goes here

**→ GO TO:** `Agent - MCP - Webflow - v0.415.md` **NOW**